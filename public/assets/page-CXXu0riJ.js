import{PencilLine as e}from"./pencil-line-DiX4p47G.js";import{Button as t,CalendarDays as n,Card as r,CardAction as i,CardContent as a,CardDescription as o,CardHeader as s,CardTitle as c,Label as l,Mail as u,MapPin as d,Separator as f,Skeleton as p,Spinner as m,Tabs as h,TabsContent as g,TabsList as _,TabsTrigger as v,Truck as y,__toESM as b,cn as x,createLucideIcon as S,formatDate as C,require_jsx_runtime as w,statusBgColors as T,statusTextColors as E,timeWindowToString as D,useAuth as O,useGetCustomerRequestsQuery as k,useGetServicesQuery as A,useGetUserByIdQuery as j}from"./index-OmLcTgDE.js";import{Badge as M}from"./badge-puQm4UnR.js";import{useRequestsSubscription as N}from"./use-requests-subscription-CIb2D-0b.js";const P=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`polyline`,{points:`12 6 12 12 16 14`,key:`68esgv`}]],F=S(`clock`,P),I=[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]],L=S(`package`,I),R=[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]],z=S(`phone`,R),B=[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]],V=S(`user`,B);var H=b(w());function U(){let n=O(),{data:l,isLoading:d}=j({id:n?.id},{skip:!n?.id});return(0,H.jsxs)(r,{children:[(0,H.jsxs)(s,{children:[(0,H.jsx)(c,{children:`Contact Information`}),(0,H.jsx)(o,{children:`Keep your contact details up to date`}),(0,H.jsx)(i,{children:(0,H.jsx)(t,{variant:`outline`,size:`icon`,className:`text-green-600 hover:text-green-600`,children:(0,H.jsx)(e,{})})})]}),(0,H.jsxs)(a,{className:`space-y-3`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,H.jsx)(V,{className:`size-4 text-muted-foreground`}),d?(0,H.jsx)(p,{className:`h-6 w-2/3`}):`${l?.first_name} ${l?.last_name}`]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-4 text-muted-foreground`,children:[(0,H.jsx)(u,{className:`size-4`}),d?(0,H.jsx)(p,{className:`h-6 w-2/3`}):l?.email_address]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-4 text-muted-foreground`,children:[(0,H.jsx)(z,{className:`size-4`}),d?(0,H.jsx)(p,{className:`h-6 w-2/3`}):`(617) 998-0987`]})]})]})}function W(){let{data:e,isLoading:t}=k(void 0,{refetchOnMountOrArgChange:!0,refetchOnReconnect:!0});N();let{data:o}=A(),u=e?.requests.filter(e=>e.status!==`completed`),p=e?.requests.filter(e=>e.status===`completed`);function b(e){var t;return o==null||(t=o.find(t=>t.id===e))==null?void 0:t.name}return(0,H.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[calc(100vh-10rem)]`,children:[(0,H.jsxs)(`div`,{className:`mb-8`,children:[(0,H.jsx)(`h2`,{className:`text-2xl font-bold`,children:`My Account`}),(0,H.jsx)(`p`,{className:`text-muted-foreground`,children:`Manage your contact information and track your moves`})]}),(0,H.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-8`,children:[(0,H.jsx)(`div`,{className:`lg:col-span-1`,children:(0,H.jsx)(U,{})}),(0,H.jsx)(`div`,{className:`lg:col-span-2`,children:(0,H.jsxs)(h,{defaultValue:`current`,className:`w-full`,children:[(0,H.jsxs)(_,{className:`grid w-full grid-cols-2`,children:[(0,H.jsx)(v,{value:`current`,children:`Current Moves`}),(0,H.jsx)(v,{value:`past`,children:`Past Moves`})]}),(0,H.jsxs)(g,{value:`current`,className:`space-y-6 mt-4`,children:[(0,H.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,H.jsx)(`h3`,{className:`text-lg font-semibold pl-1`,children:`Upcoming & Active Moves`}),(0,H.jsxs)(M,{variant:`secondary`,children:[u?u?.length:0,` active`]})]}),t&&(0,H.jsx)(`div`,{className:`flex justify-center items-center h-full`,children:(0,H.jsx)(m,{})}),u?.map(e=>(0,H.jsxs)(r,{children:[(0,H.jsxs)(s,{children:[(0,H.jsxs)(c,{className:`text-lg`,children:[`Move #`,e.id]}),(0,H.jsx)(i,{children:(0,H.jsxs)(M,{className:x(`capitalize py-1 relative overflow-hidden bg-transparent`,E[e.status]),children:[(0,H.jsx)(`span`,{className:`${T[e.status]} absolute inset-0 opacity-15`}),e.status.replace(`_`,` `),(0,H.jsx)(`div`,{className:x(`size-2 rounded-full ml-1`,T[e.status])})]})})]}),(0,H.jsxs)(a,{className:`space-y-4`,children:[(0,H.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,H.jsxs)(`div`,{className:`space-y-2`,children:[(0,H.jsxs)(l,{className:`text-sm font-medium text-muted-foreground`,children:[(0,H.jsx)(d,{className:`size-4 text-muted-foreground`}),`From`]}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${e.origin.street}, ${e.origin.city}, ${e.origin.state} ${e.origin.zip}`})]}),(0,H.jsxs)(`div`,{className:`space-y-2`,children:[(0,H.jsxs)(l,{className:`text-sm font-medium text-muted-foreground`,children:[(0,H.jsx)(d,{className:`size-4 text-muted-foreground`}),`To`]}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${e.destination.street}, ${e.destination.city}, ${e.destination.state} ${e.destination.zip}`})]})]}),(0,H.jsx)(f,{}),(0,H.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-4 text-sm`,children:[(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(n,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:C(e.moving_date)})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(L,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:b(e.service_id)})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(y,{className:`size-4 text-muted-foreground`}),(0,H.jsxs)(`span`,{children:[e.crew_size,` movers`]})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(F,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:D(e.start_time_window,e.end_time_window)})]})]})]})]},e.id))]}),(0,H.jsxs)(g,{value:`past`,className:`space-y-6 mt-4`,children:[(0,H.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,H.jsx)(`h3`,{className:`text-lg font-semibold pl-1`,children:`Completed Moves`}),(0,H.jsxs)(M,{variant:`secondary`,children:[p?p?.length:0,` completed`]})]}),p?.map(e=>(0,H.jsxs)(r,{children:[(0,H.jsxs)(s,{children:[(0,H.jsxs)(c,{className:`text-lg`,children:[`Move #`,e.id]}),(0,H.jsxs)(i,{children:[(0,H.jsxs)(M,{className:x(`capitalize py-1 relative overflow-hidden bg-transparent`,E[e.status]),children:[(0,H.jsx)(`span`,{className:`${T[e.status]} absolute inset-0 opacity-15`}),e.status.replace(`_`,` `),(0,H.jsx)(`div`,{className:x(`size-2 rounded-full ml-1`,T[e.status])})]}),(0,H.jsx)(`div`,{className:`flex items-center`,children:[...[,,,,,]].map((e,t)=>(0,H.jsx)(`span`,{className:`text-sm ${t<2?`text-yellow-400`:`text-gray-300`}`,children:`â˜…`},t))})]})]}),(0,H.jsxs)(a,{className:`space-y-4`,children:[(0,H.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,H.jsxs)(`div`,{children:[(0,H.jsx)(l,{className:`text-sm font-medium text-muted-foreground`,children:`From`}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${e.origin.city}, ${e.origin.state} ${e.origin.zip}`})]}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(l,{className:`text-sm font-medium text-muted-foreground`,children:`To`}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${e.destination.city}, ${e.destination.state} ${e.destination.zip}`})]})]}),(0,H.jsx)(f,{}),(0,H.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-4 text-sm`,children:[(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(n,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:C(e.moving_date)})]}),(0,H.jsx)(`div`,{className:`flex items-center space-x-2`,children:(0,H.jsx)(L,{className:`size-4 text-muted-foreground`})}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(y,{className:`size-4 text-muted-foreground`}),(0,H.jsxs)(`span`,{children:[e.crew_size,` movers`]})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(F,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:D(e.start_time_window,e.end_time_window)})]})]})]})]},e.id))]})]})})]})]})}const G=W;export{G as Component};