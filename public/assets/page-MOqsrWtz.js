import{f as S,X as w,Y as R,r as p,j as s,g as f,A as I,B as C,L as E,t as L,h as P}from"./index-LIwVw57E.js";import{C as U,a as A,b as B,d as F,f as z}from"./card-fA9T2TmR.js";import{a as $,S as D}from"./switch-DbW6hBRZ.js";import{I as N}from"./input-9Q9Ttv5E.js";import{S as O,P as j,a as T}from"./scroll-area-DPj461DN.js";import{S as o}from"./skeleton-Dv2j4Awu.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],G=S("pencil",V);function g(a,t={}){a||(a=0);const{currency:u="USD",notation:c="standard"}=t,l=typeof a=="string"?parseFloat(a)/100:a/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:u,notation:c,maximumFractionDigits:2}).format(l)}function M(a){a=a.replace(/^#/,""),a.length===3&&(a=a.split("").map(i=>i+i).join(""));const t=parseInt(a,16),u=t>>16&255,c=t>>8&255,l=t&255;return`${u}, ${c}, ${l}`}const b="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function H(){const{data:a,isLoading:t}=w(),[u,{isLoading:c}]=R(),[l,i]=p.useState([]),[_,x]=p.useState(!1),[m,h]=p.useState(null);p.useEffect(()=>{a&&i(a)},[a]);function d(e){const n=l.map(r=>r.id===e.id?e:r);i(n),x(!0)}return s.jsx($,{children:s.jsxs(U,{children:[s.jsx(A,{children:s.jsx(B,{children:"Rates"})}),s.jsx(F,{className:"space-y-6",children:s.jsxs(O,{className:"w-full",children:[s.jsxs("div",{className:f("mb-4 text-muted-foreground",b),children:[s.jsx("p",{children:"Name"}),s.jsx("p",{children:"2 movers"}),s.jsx("p",{children:"3 movers"}),s.jsx("p",{children:"4 movers"}),s.jsx("p",{children:"Extra mover"}),s.jsx("p",{children:"Extra truck"}),s.jsx("p",{children:"On/Off"}),s.jsx("p",{className:"sr-only",children:"Actions"})]}),s.jsx(I,{}),s.jsxs("div",{className:"min-w-[900px] divide-y",children:[t&&s.jsx(Q,{}),l==null?void 0:l.map((e,n)=>s.jsxs("div",{className:f("py-4",b),children:[m===n?s.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[s.jsx(N,{value:e.name,onChange:r=>{d({...e,name:r.target.value})}}),s.jsx(N,{type:"color",value:e.color,onChange:r=>{d({...e,color:r.target.value})},className:"px-[2px] py-0"})]}):s.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:e.color,backgroundColor:`rgba(${M(e.color)}, 0.1)`},children:[e.name,s.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}})]}),Object.keys(e.movers_rates).slice(0,3).map((r,v)=>{const y=e.movers_rates[r].hourly_rate;return m===n?s.jsx(j,{value:y,onValueChange:k=>{d({...e,movers_rates:{...e.movers_rates,[r]:{...e.movers_rates[r],hourly_rate:k}}})}},v):s.jsx("div",{children:g(y)},v)}),s.jsx("div",{children:m===n?s.jsx(j,{value:e.extra_mover_rate,onValueChange:r=>d({...e,extra_mover_rate:r})}):g(e.extra_mover_rate)}),s.jsx("div",{children:m===n?s.jsx(j,{value:e.extra_truck_rate,onValueChange:r=>d({...e,extra_truck_rate:r})}):g(e.extra_truck_rate)}),s.jsx(D,{id:e.name,checked:e.enable,disabled:n===0,onCheckedChange:r=>{d({...e,enable:r})}}),s.jsx(C,{variant:"outline",size:"icon",onClick:()=>{h(r=>r===n?null:n)},children:s.jsx(G,{})})]},n))]}),s.jsx(T,{orientation:"horizontal"})]})}),s.jsx(z,{className:"justify-end border-t",children:s.jsxs("div",{className:f("flex gap-3 transition-opacity duration-500",{"invisible opacity-0":!_,"visible opacity-100":_}),children:[s.jsx(C,{type:"button",variant:"outline",onClick:()=>{i(a),x(!1),h(null)},children:"Cancel"}),s.jsx(E,{type:"button",disabled:c,loading:c,onClick:()=>{u({rates:l}).unwrap().then(()=>{x(!1),h(null),L.success("Changes saved")}).catch(e=>{P(e)})},children:"Save changes"})]})})]})})}const Z=H;function Q(){return s.jsx(s.Fragment,{children:Array.from({length:5}).map((a,t)=>s.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"}),s.jsx(o,{className:"h-9 w-full"})]},t))})}export{Z as Component};
