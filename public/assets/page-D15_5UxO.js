import{$ as N,r as m,j as e,S as b,l as T,B as p,m as y,n as w,o as F,p as L,q as I,s as _,L as g,t as C,h as v,a0 as A,a1 as B,a2 as E,g as P}from"./index-Bugo2kCX.js";import{C as q,a as M,b as O,f as U,d as D}from"./card-B7f8wYMQ.js";import{S as H}from"./setting-page-wrapper-C0IX4u7Y.js";import{u as V,F as z,a as G,b as Q,c as R,d as W,e as $,f as J,s as K,o as X,g as Y}from"./zod-CMXYR7Wv.js";import{I as S}from"./input-suo2QlKj.js";import{P as Z}from"./plus-9l7I5RFL.js";import{S as ee}from"./skeleton-rgZeC6uo.js";import{S as se}from"./switch-DzHuZscz.js";import"./label-DqfnIeOw.js";import"./index-CSRKRYQX.js";const ae=X({name:Y({required_error:"Name is required."}).min(1,{message:"Name must be at least 1 character long."})});function te(){const[n,{isLoading:l}]=N(),[h,o]=m.useState(!1),a=V({mode:"onChange",reValidateMode:"onChange",resolver:K(ae),defaultValues:{name:""}});function t(r){n(r).unwrap().then(()=>{C.success("Truck created"),a.reset(),o(!1)}).catch(d=>{v(d)})}return e.jsxs(b,{open:h,onOpenChange:o,children:[e.jsx(T,{asChild:!0,children:e.jsxs(p,{children:[e.jsx(Z,{}),"Create truck"]})}),e.jsxs(y,{children:[e.jsxs(w,{children:[e.jsx(F,{children:"Add truck"}),e.jsx(L,{className:"sr-only"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(z,{...a,children:e.jsx("form",{onSubmit:a.handleSubmit(t),className:"space-y-6",children:e.jsx(G,{control:a.control,name:"name",render:({field:r})=>e.jsxs(Q,{children:[e.jsx(R,{children:"Name (required)"}),e.jsx(W,{children:"Name of the truck for internal use."}),e.jsx($,{children:e.jsx(S,{...r,autoComplete:"off"})}),e.jsx(J,{})]})})})})}),e.jsxs(I,{children:[e.jsx(_,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})}),e.jsx(g,{type:"button",loading:l,disabled:l,onClick:a.handleSubmit(t),className:"w-full",children:"Add truck"})]})]})]})}function re(){const{data:n,isLoading:l,isError:h}=A(),[o,{isLoading:a}]=B(),[t,r]=m.useState([]),[d,x]=m.useState(!1);m.useEffect(()=>{n&&r(n)},[n]);function k(){o({trucks:t}).unwrap().then(()=>{x(!1),C.success("Changes saved")}).catch(s=>{v(s)})}function j(s,i,c){const u=t.map(f=>f.id===s.id?{...f,[i]:c}:f);r(u),x(!0)}return h?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch trucks"})}):e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[l&&e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((s,i)=>e.jsx(ee,{className:"h-9 w-full"},i))}),e.jsx("div",{className:"space-y-4",children:t==null?void 0:t.map((s,i)=>e.jsxs("div",{className:"grid grid-cols-[6rem_3rem_1fr] gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(E,{className:"size-5"}),e.jsxs("span",{children:["Truck ",i+1]})]}),e.jsx(se,{checked:s.is_active,onCheckedChange:c=>{j(s,"is_active",c)}}),e.jsx(S,{value:s.name,onChange:c=>{const u=c.target.value;j(s,"name",u)}})]},s.id))}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:P("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!d,"visible opacity-100":d}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-3 sm:w-auto",children:[e.jsx(p,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{r(n),x(!1)},children:"Cancel"}),e.jsx(g,{type:"button",className:"w-full sm:w-auto",disabled:a,loading:a,onClick:k,children:"Save changes"})]})})})]})}function ne(){return e.jsx(H,{children:e.jsxs(q,{className:"max-w-xl",children:[e.jsxs(M,{children:[e.jsx(O,{children:"Trucks"}),e.jsx(U,{children:e.jsx(te,{})})]}),e.jsx(D,{children:e.jsx(re,{})})]})})}const pe=ne;export{pe as Component};
