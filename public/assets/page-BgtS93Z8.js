import{K as S,M as w,r as c,j as s,g as h,z as R,B as C,L as E,t as I,h as L}from"./index-Cj1aizr1.js";import{C as P,a as B,b as A,d as U,e as z}from"./card-DbZ9XtYA.js";import{S as O}from"./switch-DFqHTdH9.js";import{I as N}from"./input-dtjFCb6t.js";import{S as T,a as V}from"./scroll-area-COLmv1WB.js";import{S as l}from"./skeleton--NcqKXF8.js";import{S as F}from"./setting-page-wrapper-qE5NUTXL.js";import{h as G,f as p}from"./helpers-BTnTAqdu.js";import{P as f}from"./price-input-DzNXYzmh.js";import{P as M}from"./pen-line-CZ2fU9DC.js";import"./index-BMLLlnnD.js";const y="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function D(){const{data:t,isLoading:d}=S(),[b,{isLoading:j}]=w(),[o,m]=c.useState([]),[g,u]=c.useState(!1),[i,x]=c.useState(null);c.useEffect(()=>{t&&m(t)},[t]);function n(e){const r=o.map(a=>a.id===e.id?e:a);m(r),u(!0)}return s.jsx(F,{children:s.jsxs(P,{children:[s.jsx(B,{children:s.jsx(A,{children:"Rates"})}),s.jsx(U,{className:"space-y-6",children:s.jsxs(T,{className:"w-full",children:[s.jsxs("div",{className:h("mb-4 text-muted-foreground",y),children:[s.jsx("p",{children:"Name"}),s.jsx("p",{children:"2 movers"}),s.jsx("p",{children:"3 movers"}),s.jsx("p",{children:"4 movers"}),s.jsx("p",{children:"Extra mover"}),s.jsx("p",{children:"Extra truck"}),s.jsx("p",{children:"On/Off"}),s.jsx("p",{className:"sr-only",children:"Actions"})]}),s.jsx(R,{}),s.jsxs("div",{className:"min-w-[900px] divide-y",children:[d&&s.jsx(H,{}),o==null?void 0:o.map((e,r)=>s.jsxs("div",{className:h("py-4",y),children:[i===r?s.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[s.jsx(N,{value:e.name,onChange:a=>{n({...e,name:a.target.value})}}),s.jsx(N,{type:"color",value:e.color,onChange:a=>{n({...e,color:a.target.value})},className:"px-[2px] py-0"})]}):s.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:e.color,backgroundColor:`rgba(${G(e.color)}, 0.1)`},children:[e.name,s.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}})]}),Object.keys(e.movers_rates).slice(0,3).map((a,_)=>{const v=e.movers_rates[a].hourly_rate;return i===r?s.jsx(f,{value:v,onValueChange:k=>{n({...e,movers_rates:{...e.movers_rates,[a]:{...e.movers_rates[a],hourly_rate:k}}})}},_):s.jsx("div",{children:p(v)},_)}),s.jsx("div",{children:i===r?s.jsx(f,{value:e.extra_mover_rate,onValueChange:a=>n({...e,extra_mover_rate:a})}):p(e.extra_mover_rate)}),s.jsx("div",{children:i===r?s.jsx(f,{value:e.extra_truck_rate,onValueChange:a=>n({...e,extra_truck_rate:a})}):p(e.extra_truck_rate)}),s.jsx(O,{id:e.name,checked:e.enable,disabled:r===0,onCheckedChange:a=>{n({...e,enable:a})}}),s.jsx(C,{variant:"outline",size:"icon",onClick:()=>{x(a=>a===r?null:r)},children:s.jsx(M,{})})]},r))]}),s.jsx(V,{orientation:"horizontal"})]})}),s.jsx(z,{className:"justify-end border-t",children:s.jsxs("div",{className:h("flex gap-3 transition-opacity duration-500",{"invisible opacity-0":!g,"visible opacity-100":g}),children:[s.jsx(C,{type:"button",variant:"outline",onClick:()=>{m(t),u(!1),x(null)},children:"Cancel"}),s.jsx(E,{type:"button",disabled:j,loading:j,onClick:()=>{b({rates:o}).unwrap().then(()=>{u(!1),x(null),I.success("Changes saved")}).catch(e=>{L(e)})},children:"Save changes"})]})})]})})}const as=D;function H(){return s.jsx(s.Fragment,{children:Array.from({length:5}).map((t,d)=>s.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"})]},d))})}export{as as Component};
