import{aF as D,r as h,j as e,g as y,B as f,L as g,t as b,aG as T,az as V,aH as E,ay as M}from"./index-Cj1aizr1.js";import{S as R}from"./setting-page-wrapper-qE5NUTXL.js";import{C,a as v,b as S,d as _,e as w}from"./card-DbZ9XtYA.js";import{u as N,F,a as t,b as l,c,e as m,o as L,k as z,f as p,s as G,g as x}from"./zod-D8Kr9309.js";import{I as u}from"./input-dtjFCb6t.js";import{P as H,i as O}from"./phone-input-BX3-NKOq.js";import"./label-DBLbUNnz.js";L({image:z(File).nullable()});function Q(s){const o=s.target.files&&s.target.files[0],i=o?URL.createObjectURL(o):"";return{file:o,displayUrl:i}}function W({data:s}){const[o,{isLoading:i}]=D(),[a,r]=h.useState(null),n=N({defaultValues:{image:null}});async function d(j){await o({image:j.image}).unwrap(),b.success("Changes saved"),n.reset()}return h.useEffect(()=>{s&&r(s.company_logo)},[s]),e.jsxs(C,{className:"max-w-xl",children:[e.jsx(v,{children:e.jsx(S,{children:"Branding"})}),e.jsx(_,{children:e.jsx(F,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(d),className:"space-y-6",children:[e.jsx(t,{control:n.control,name:"image",render:({field:{value:j,onChange:U,...I}})=>e.jsxs(l,{children:[e.jsx(c,{children:"Logo"}),e.jsx(m,{children:e.jsx(u,{...I,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:k=>{const{file:P,displayUrl:B}=Q(k);r(B),U(P)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:a&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:a,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})})]})})}),e.jsx(w,{className:"justify-end border-t",children:e.jsxs("div",{className:y("flex transition-opacity gap-3 duration-500",{"invisible opacity-0":!n.formState.isDirty,"visible opacity-100":n.formState.isDirty}),children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>{r((s==null?void 0:s.company_logo)||null),n.reset()},children:"Cancel"}),e.jsx(g,{type:"button",disabled:i,loading:i,onClick:()=>{n.handleSubmit(d)()},children:"Save changes"})]})})]})}const q=L({company_name:x(),company_address:x(),company_phone:x().refine(s=>O(s,"US"),{message:"Invalid phone number"}),company_email:x().email(),company_website:x()});function A({data:s}){const[o,{isLoading:i}]=T(),a=N({resolver:G(q),defaultValues:{company_name:s.company_name??"",company_address:s.company_address??"",company_phone:s.company_phone??"",company_email:s.company_email??"",company_website:s.company_website??""}});async function r(n){const d=await o({data:n}).unwrap();d&&(b.success("Changes saved"),a.reset({...d}))}return e.jsxs(C,{className:"max-w-xl",children:[e.jsx(v,{children:e.jsx(S,{children:"Company Information"})}),e.jsx(_,{children:e.jsx(F,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(r),className:"space-y-6",children:[e.jsx(t,{control:a.control,name:"company_name",render:({field:n})=>e.jsxs(l,{children:[e.jsx(c,{children:"Company name"}),e.jsx(m,{children:e.jsx(u,{...n,autoComplete:"off"})}),e.jsx(p,{})]})}),e.jsx(t,{control:a.control,name:"company_address",render:({field:n})=>e.jsxs(l,{children:[e.jsx(c,{children:"Company address"}),e.jsx(m,{children:e.jsx(u,{...n,autoComplete:"off"})}),e.jsx(p,{})]})}),e.jsx(t,{control:a.control,name:"company_phone",render:({field:n})=>e.jsxs(l,{children:[e.jsx(c,{children:"Company phone"}),e.jsx(m,{children:e.jsx(H,{...n,value:V(n.value??""),handleValueChange:n.onChange})}),e.jsx(p,{})]})}),e.jsx(t,{control:a.control,name:"company_email",render:({field:n})=>e.jsxs(l,{children:[e.jsx(c,{children:"Company email"}),e.jsx(m,{children:e.jsx(u,{...n,autoComplete:"off"})}),e.jsx(p,{})]})}),e.jsx(t,{control:a.control,name:"company_website",render:({field:n})=>e.jsxs(l,{children:[e.jsx(c,{children:"Company website"}),e.jsx(m,{children:e.jsx(u,{...n,autoComplete:"off"})}),e.jsx(p,{})]})})]})})}),e.jsx(w,{className:"justify-end border-t",children:e.jsxs("div",{className:y("flex transition-opacity gap-3 duration-500",{"invisible opacity-0":!a.formState.isDirty,"visible opacity-100":a.formState.isDirty}),children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>a.reset(),children:"Cancel"}),e.jsx(g,{type:"button",disabled:i,loading:i,onClick:()=>{a.handleSubmit(r)()},children:"Save changes"})]})})]})}function J(){const{data:s,isLoading:o}=E();return e.jsx(R,{children:o?e.jsx("div",{className:"flex h-96 max-w-xl items-center justify-center",children:e.jsx(M,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{data:s}),e.jsx(W,{data:s})]})})}const se=J;export{se as Component};
