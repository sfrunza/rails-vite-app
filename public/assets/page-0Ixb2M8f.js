import{N as Ue,j as e,r as a,ad as ze,Z as yt,_ as Be,ae as bt,$ as Ct,af as De,ag as Tt,a2 as B,ah as Nt,a1 as M,a4 as I,ai as q,aj as It,ak as We,al as Pt,am as _t,an as Et,ao as Rt,ap as Mt,aq as At,ar as Dt,as as kt,at as Lt,au as Ot,g as E,O as Ke,av as Bt,aw as Vt,ax as Ft,m as Ht,n as Ut,o as zt,ay as $e,az as qe,p as Wt,q as Kt,B as ke,L as $t,t as Ve,h as Fe,S as qt,l as Gt,aA as Yt,aB as Zt,aC as Xt,aD as Qt,aE as Jt}from"./index-Cj1aizr1.js";import{C as eo,a as to,b as oo,c as no,f as so,d as ro}from"./card-DbZ9XtYA.js";import{S as ao}from"./setting-page-wrapper-qE5NUTXL.js";import{S as lo,a as io,c as He}from"./scroll-area-COLmv1WB.js";import{T as co,a as uo,b as po,B as mo,P as ho}from"./badge-Ct_kwu4P.js";import{u as fo,s as xo,o as go,F as vo,a as J,b as ee,c as te,e as oe,f as ae,d as Ie,g as pe,i as So,j as wo}from"./zod-D8Kr9309.js";import{I as Pe}from"./input-dtjFCb6t.js";import{P as jo}from"./password-input-n0EgQ4ef.js";import{P as yo,i as bo}from"./phone-input-BX3-NKOq.js";import{u as Co}from"./index-BMLLlnnD.js";import{S as To}from"./switch-DFqHTdH9.js";import{f as No}from"./format-BtYX0kVO.js";import{P as Io}from"./plus-5VBlmZlM.js";import"./label-DBLbUNnz.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_o=Ue("check",Po);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ro=Ue("chevron-up",Eo),Mo=["all","admin","manager","foreman","driver","helper"];function Ao({filter:t,handleSetFilter:n}){return e.jsx(co,{value:t,onValueChange:o=>{n(o)},children:e.jsxs(lo,{className:"pb-2",children:[e.jsx(uo,{children:Mo.map(o=>e.jsx(po,{value:o,className:"capitalize",children:o},o))}),e.jsx(io,{orientation:"horizontal"})]})})}var Do=[" ","Enter","ArrowUp","ArrowDown"],ko=[" ","Enter"],ne="Select",[ve,Se,Lo]=Tt(ne),[ce,Yn]=Ct(ne,[Lo,ze]),we=ze(),[Oo,G]=ce(ne),[Bo,Vo]=ce(ne),Ge=t=>{const{__scopeSelect:n,children:o,open:l,defaultOpen:c,onOpenChange:d,value:s,defaultValue:i,onValueChange:r,dir:p,name:u,autoComplete:v,disabled:C,required:N,form:T}=t,m=we(n),[g,j]=a.useState(null),[h,x]=a.useState(null),[A,D]=a.useState(!1),de=yt(p),[P,L]=Be({prop:l,defaultProp:c??!1,onChange:d,caller:ne}),[W,Z]=Be({prop:s,defaultProp:i,onChange:r,caller:ne}),V=a.useRef(null),F=g?T||!!g.closest("form"):!0,[K,H]=a.useState(new Set),U=Array.from(K).map(_=>_.props.value).join(";");return e.jsx(bt,{...m,children:e.jsxs(Oo,{required:N,scope:n,trigger:g,onTriggerChange:j,valueNode:h,onValueNodeChange:x,valueNodeHasChildren:A,onValueNodeHasChildrenChange:D,contentId:De(),value:W,onValueChange:Z,open:P,onOpenChange:L,dir:de,triggerPointerDownPosRef:V,disabled:C,children:[e.jsx(ve.Provider,{scope:n,children:e.jsx(Bo,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(_=>{H(O=>new Set(O).add(_))},[]),onNativeOptionRemove:a.useCallback(_=>{H(O=>{const z=new Set(O);return z.delete(_),z})},[]),children:o})}),F?e.jsxs(xt,{"aria-hidden":!0,required:N,tabIndex:-1,name:u,autoComplete:v,value:W,onChange:_=>Z(_.target.value),disabled:C,form:T,children:[W===void 0?e.jsx("option",{value:""}):null,Array.from(K)]},U):null]})})};Ge.displayName=ne;var Ye="SelectTrigger",Ze=a.forwardRef((t,n)=>{const{__scopeSelect:o,disabled:l=!1,...c}=t,d=we(o),s=G(Ye,o),i=s.disabled||l,r=B(n,s.onTriggerChange),p=Se(o),u=a.useRef("touch"),[v,C,N]=vt(m=>{const g=p().filter(x=>!x.disabled),j=g.find(x=>x.value===s.value),h=St(g,m,j);h!==void 0&&s.onValueChange(h.value)}),T=m=>{i||(s.onOpenChange(!0),N()),m&&(s.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return e.jsx(Nt,{asChild:!0,...d,children:e.jsx(M.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":gt(s.value)?"":void 0,...c,ref:r,onClick:I(c.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&T(m)}),onPointerDown:I(c.onPointerDown,m=>{u.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(T(m),m.preventDefault())}),onKeyDown:I(c.onKeyDown,m=>{const g=v.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&C(m.key),!(g&&m.key===" ")&&Do.includes(m.key)&&(T(),m.preventDefault())})})})});Ze.displayName=Ye;var Xe="SelectValue",Qe=a.forwardRef((t,n)=>{const{__scopeSelect:o,className:l,style:c,children:d,placeholder:s="",...i}=t,r=G(Xe,o),{onValueNodeHasChildrenChange:p}=r,u=d!==void 0,v=B(n,r.onValueNodeChange);return q(()=>{p(u)},[p,u]),e.jsx(M.span,{...i,ref:v,style:{pointerEvents:"none"},children:gt(r.value)?e.jsx(e.Fragment,{children:s}):d})});Qe.displayName=Xe;var Fo="SelectIcon",Je=a.forwardRef((t,n)=>{const{__scopeSelect:o,children:l,...c}=t;return e.jsx(M.span,{"aria-hidden":!0,...c,ref:n,children:l||"â–¼"})});Je.displayName=Fo;var Ho="SelectPortal",et=t=>e.jsx(It,{asChild:!0,...t});et.displayName=Ho;var se="SelectContent",tt=a.forwardRef((t,n)=>{const o=G(se,t.__scopeSelect),[l,c]=a.useState();if(q(()=>{c(new DocumentFragment)},[]),!o.open){const d=l;return d?We.createPortal(e.jsx(ot,{scope:t.__scopeSelect,children:e.jsx(ve.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),d):null}return e.jsx(nt,{...t,ref:n})});tt.displayName=se;var k=10,[ot,Y]=ce(se),Uo="SelectContentImpl",zo=At("SelectContent.RemoveScroll"),nt=a.forwardRef((t,n)=>{const{__scopeSelect:o,position:l="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:d,onPointerDownOutside:s,side:i,sideOffset:r,align:p,alignOffset:u,arrowPadding:v,collisionBoundary:C,collisionPadding:N,sticky:T,hideWhenDetached:m,avoidCollisions:g,...j}=t,h=G(se,o),[x,A]=a.useState(null),[D,de]=a.useState(null),P=B(n,f=>A(f)),[L,W]=a.useState(null),[Z,V]=a.useState(null),F=Se(o),[K,H]=a.useState(!1),U=a.useRef(!1);a.useEffect(()=>{if(x)return Et(x)},[x]),Rt();const _=a.useCallback(f=>{const[b,...R]=F().map(w=>w.ref.current),[y]=R.slice(-1),S=document.activeElement;for(const w of f)if(w===S||(w==null||w.scrollIntoView({block:"nearest"}),w===b&&D&&(D.scrollTop=0),w===y&&D&&(D.scrollTop=D.scrollHeight),w==null||w.focus(),document.activeElement!==S))return},[F,D]),O=a.useCallback(()=>_([L,x]),[_,L,x]);a.useEffect(()=>{K&&O()},[K,O]);const{onOpenChange:z,triggerPointerDownPosRef:$}=h;a.useEffect(()=>{if(x){let f={x:0,y:0};const b=y=>{var S,w;f={x:Math.abs(Math.round(y.pageX)-(((S=$.current)==null?void 0:S.x)??0)),y:Math.abs(Math.round(y.pageY)-(((w=$.current)==null?void 0:w.y)??0))}},R=y=>{f.x<=10&&f.y<=10?y.preventDefault():x.contains(y.target)||z(!1),document.removeEventListener("pointermove",b),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",b),document.addEventListener("pointerup",R,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",R,{capture:!0})}}},[x,z,$]),a.useEffect(()=>{const f=()=>z(!1);return window.addEventListener("blur",f),window.addEventListener("resize",f),()=>{window.removeEventListener("blur",f),window.removeEventListener("resize",f)}},[z]);const[je,he]=vt(f=>{const b=F().filter(S=>!S.disabled),R=b.find(S=>S.ref.current===document.activeElement),y=St(b,f,R);y&&setTimeout(()=>y.ref.current.focus())}),ye=a.useCallback((f,b,R)=>{const y=!U.current&&!R;(h.value!==void 0&&h.value===b||y)&&(W(f),y&&(U.current=!0))},[h.value]),be=a.useCallback(()=>x==null?void 0:x.focus(),[x]),re=a.useCallback((f,b,R)=>{const y=!U.current&&!R;(h.value!==void 0&&h.value===b||y)&&V(f)},[h.value]),fe=l==="popper"?_e:st,ue=fe===_e?{side:i,sideOffset:r,align:p,alignOffset:u,arrowPadding:v,collisionBoundary:C,collisionPadding:N,sticky:T,hideWhenDetached:m,avoidCollisions:g}:{};return e.jsx(ot,{scope:o,content:x,viewport:D,onViewportChange:de,itemRefCallback:ye,selectedItem:L,onItemLeave:be,itemTextRefCallback:re,focusSelectedItem:O,selectedItemText:Z,position:l,isPositioned:K,searchRef:je,children:e.jsx(Mt,{as:zo,allowPinchZoom:!0,children:e.jsx(Dt,{asChild:!0,trapped:h.open,onMountAutoFocus:f=>{f.preventDefault()},onUnmountAutoFocus:I(c,f=>{var b;(b=h.trigger)==null||b.focus({preventScroll:!0}),f.preventDefault()}),children:e.jsx(kt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(fe,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:f=>f.preventDefault(),...j,...ue,onPlaced:()=>H(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:I(j.onKeyDown,f=>{const b=f.ctrlKey||f.altKey||f.metaKey;if(f.key==="Tab"&&f.preventDefault(),!b&&f.key.length===1&&he(f.key),["ArrowUp","ArrowDown","Home","End"].includes(f.key)){let y=F().filter(S=>!S.disabled).map(S=>S.ref.current);if(["ArrowUp","End"].includes(f.key)&&(y=y.slice().reverse()),["ArrowUp","ArrowDown"].includes(f.key)){const S=f.target,w=y.indexOf(S);y=y.slice(w+1)}setTimeout(()=>_(y)),f.preventDefault()}})})})})})})});nt.displayName=Uo;var Wo="SelectItemAlignedPosition",st=a.forwardRef((t,n)=>{const{__scopeSelect:o,onPlaced:l,...c}=t,d=G(se,o),s=Y(se,o),[i,r]=a.useState(null),[p,u]=a.useState(null),v=B(n,P=>u(P)),C=Se(o),N=a.useRef(!1),T=a.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:j,focusSelectedItem:h}=s,x=a.useCallback(()=>{if(d.trigger&&d.valueNode&&i&&p&&m&&g&&j){const P=d.trigger.getBoundingClientRect(),L=p.getBoundingClientRect(),W=d.valueNode.getBoundingClientRect(),Z=j.getBoundingClientRect();if(d.dir!=="rtl"){const S=Z.left-L.left,w=W.left-S,X=P.left-w,Q=P.width+X,Ce=Math.max(Q,L.width),Te=window.innerWidth-k,Ne=He(w,[k,Math.max(k,Te-Ce)]);i.style.minWidth=Q+"px",i.style.left=Ne+"px"}else{const S=L.right-Z.right,w=window.innerWidth-W.right-S,X=window.innerWidth-P.right-w,Q=P.width+X,Ce=Math.max(Q,L.width),Te=window.innerWidth-k,Ne=He(w,[k,Math.max(k,Te-Ce)]);i.style.minWidth=Q+"px",i.style.right=Ne+"px"}const V=C(),F=window.innerHeight-k*2,K=m.scrollHeight,H=window.getComputedStyle(p),U=parseInt(H.borderTopWidth,10),_=parseInt(H.paddingTop,10),O=parseInt(H.borderBottomWidth,10),z=parseInt(H.paddingBottom,10),$=U+_+K+z+O,je=Math.min(g.offsetHeight*5,$),he=window.getComputedStyle(m),ye=parseInt(he.paddingTop,10),be=parseInt(he.paddingBottom,10),re=P.top+P.height/2-k,fe=F-re,ue=g.offsetHeight/2,f=g.offsetTop+ue,b=U+_+f,R=$-b;if(b<=re){const S=V.length>0&&g===V[V.length-1].ref.current;i.style.bottom="0px";const w=p.clientHeight-m.offsetTop-m.offsetHeight,X=Math.max(fe,ue+(S?be:0)+w+O),Q=b+X;i.style.height=Q+"px"}else{const S=V.length>0&&g===V[0].ref.current;i.style.top="0px";const X=Math.max(re,U+m.offsetTop+(S?ye:0)+ue)+R;i.style.height=X+"px",m.scrollTop=b-re+m.offsetTop}i.style.margin=`${k}px 0`,i.style.minHeight=je+"px",i.style.maxHeight=F+"px",l==null||l(),requestAnimationFrame(()=>N.current=!0)}},[C,d.trigger,d.valueNode,i,p,m,g,j,d.dir,l]);q(()=>x(),[x]);const[A,D]=a.useState();q(()=>{p&&D(window.getComputedStyle(p).zIndex)},[p]);const de=a.useCallback(P=>{P&&T.current===!0&&(x(),h==null||h(),T.current=!1)},[x,h]);return e.jsx($o,{scope:o,contentWrapper:i,shouldExpandOnScrollRef:N,onScrollButtonChange:de,children:e.jsx("div",{ref:r,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:e.jsx(M.div,{...c,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});st.displayName=Wo;var Ko="SelectPopperPosition",_e=a.forwardRef((t,n)=>{const{__scopeSelect:o,align:l="start",collisionPadding:c=k,...d}=t,s=we(o);return e.jsx(Lt,{...s,...d,ref:n,align:l,collisionPadding:c,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_e.displayName=Ko;var[$o,Le]=ce(se,{}),Ee="SelectViewport",rt=a.forwardRef((t,n)=>{const{__scopeSelect:o,nonce:l,...c}=t,d=Y(Ee,o),s=Le(Ee,o),i=B(n,d.onViewportChange),r=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(ve.Slot,{scope:o,children:e.jsx(M.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:I(c.onScroll,p=>{const u=p.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:C}=s;if(C!=null&&C.current&&v){const N=Math.abs(r.current-u.scrollTop);if(N>0){const T=window.innerHeight-k*2,m=parseFloat(v.style.minHeight),g=parseFloat(v.style.height),j=Math.max(m,g);if(j<T){const h=j+N,x=Math.min(T,h),A=h-x;v.style.height=x+"px",v.style.bottom==="0px"&&(u.scrollTop=A>0?A:0,v.style.justifyContent="flex-end")}}}r.current=u.scrollTop})})})]})});rt.displayName=Ee;var at="SelectGroup",[qo,Go]=ce(at),Yo=a.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t,c=De();return e.jsx(qo,{scope:o,id:c,children:e.jsx(M.div,{role:"group","aria-labelledby":c,...l,ref:n})})});Yo.displayName=at;var lt="SelectLabel",Zo=a.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t,c=Go(lt,o);return e.jsx(M.div,{id:c.id,...l,ref:n})});Zo.displayName=lt;var ge="SelectItem",[Xo,it]=ce(ge),ct=a.forwardRef((t,n)=>{const{__scopeSelect:o,value:l,disabled:c=!1,textValue:d,...s}=t,i=G(ge,o),r=Y(ge,o),p=i.value===l,[u,v]=a.useState(d??""),[C,N]=a.useState(!1),T=B(n,h=>{var x;return(x=r.itemRefCallback)==null?void 0:x.call(r,h,l,c)}),m=De(),g=a.useRef("touch"),j=()=>{c||(i.onValueChange(l),i.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Xo,{scope:o,value:l,disabled:c,textId:m,isSelected:p,onItemTextChange:a.useCallback(h=>{v(x=>x||((h==null?void 0:h.textContent)??"").trim())},[]),children:e.jsx(ve.ItemSlot,{scope:o,value:l,disabled:c,textValue:u,children:e.jsx(M.div,{role:"option","aria-labelledby":m,"data-highlighted":C?"":void 0,"aria-selected":p&&C,"data-state":p?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...s,ref:T,onFocus:I(s.onFocus,()=>N(!0)),onBlur:I(s.onBlur,()=>N(!1)),onClick:I(s.onClick,()=>{g.current!=="mouse"&&j()}),onPointerUp:I(s.onPointerUp,()=>{g.current==="mouse"&&j()}),onPointerDown:I(s.onPointerDown,h=>{g.current=h.pointerType}),onPointerMove:I(s.onPointerMove,h=>{var x;g.current=h.pointerType,c?(x=r.onItemLeave)==null||x.call(r):g.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:I(s.onPointerLeave,h=>{var x;h.currentTarget===document.activeElement&&((x=r.onItemLeave)==null||x.call(r))}),onKeyDown:I(s.onKeyDown,h=>{var A;((A=r.searchRef)==null?void 0:A.current)!==""&&h.key===" "||(ko.includes(h.key)&&j(),h.key===" "&&h.preventDefault())})})})})});ct.displayName=ge;var me="SelectItemText",dt=a.forwardRef((t,n)=>{const{__scopeSelect:o,className:l,style:c,...d}=t,s=G(me,o),i=Y(me,o),r=it(me,o),p=Vo(me,o),[u,v]=a.useState(null),C=B(n,j=>v(j),r.onItemTextChange,j=>{var h;return(h=i.itemTextRefCallback)==null?void 0:h.call(i,j,r.value,r.disabled)}),N=u==null?void 0:u.textContent,T=a.useMemo(()=>e.jsx("option",{value:r.value,disabled:r.disabled,children:N},r.value),[r.disabled,r.value,N]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=p;return q(()=>(m(T),()=>g(T)),[m,g,T]),e.jsxs(e.Fragment,{children:[e.jsx(M.span,{id:r.textId,...d,ref:C}),r.isSelected&&s.valueNode&&!s.valueNodeHasChildren?We.createPortal(d.children,s.valueNode):null]})});dt.displayName=me;var ut="SelectItemIndicator",pt=a.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t;return it(ut,o).isSelected?e.jsx(M.span,{"aria-hidden":!0,...l,ref:n}):null});pt.displayName=ut;var Re="SelectScrollUpButton",mt=a.forwardRef((t,n)=>{const o=Y(Re,t.__scopeSelect),l=Le(Re,t.__scopeSelect),[c,d]=a.useState(!1),s=B(n,l.onScrollButtonChange);return q(()=>{if(o.viewport&&o.isPositioned){let i=function(){const p=r.scrollTop>0;d(p)};const r=o.viewport;return i(),r.addEventListener("scroll",i),()=>r.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),c?e.jsx(ft,{...t,ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:r}=o;i&&r&&(i.scrollTop=i.scrollTop-r.offsetHeight)}}):null});mt.displayName=Re;var Me="SelectScrollDownButton",ht=a.forwardRef((t,n)=>{const o=Y(Me,t.__scopeSelect),l=Le(Me,t.__scopeSelect),[c,d]=a.useState(!1),s=B(n,l.onScrollButtonChange);return q(()=>{if(o.viewport&&o.isPositioned){let i=function(){const p=r.scrollHeight-r.clientHeight,u=Math.ceil(r.scrollTop)<p;d(u)};const r=o.viewport;return i(),r.addEventListener("scroll",i),()=>r.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),c?e.jsx(ft,{...t,ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:r}=o;i&&r&&(i.scrollTop=i.scrollTop+r.offsetHeight)}}):null});ht.displayName=Me;var ft=a.forwardRef((t,n)=>{const{__scopeSelect:o,onAutoScroll:l,...c}=t,d=Y("SelectScrollButton",o),s=a.useRef(null),i=Se(o),r=a.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return a.useEffect(()=>()=>r(),[r]),q(()=>{var u;const p=i().find(v=>v.ref.current===document.activeElement);(u=p==null?void 0:p.ref.current)==null||u.scrollIntoView({block:"nearest"})},[i]),e.jsx(M.div,{"aria-hidden":!0,...c,ref:n,style:{flexShrink:0,...c.style},onPointerDown:I(c.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(l,50))}),onPointerMove:I(c.onPointerMove,()=>{var p;(p=d.onItemLeave)==null||p.call(d),s.current===null&&(s.current=window.setInterval(l,50))}),onPointerLeave:I(c.onPointerLeave,()=>{r()})})}),Qo="SelectSeparator",Jo=a.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t;return e.jsx(M.div,{"aria-hidden":!0,...l,ref:n})});Jo.displayName=Qo;var Ae="SelectArrow",en=a.forwardRef((t,n)=>{const{__scopeSelect:o,...l}=t,c=we(o),d=G(Ae,o),s=Y(Ae,o);return d.open&&s.position==="popper"?e.jsx(Ot,{...c,...l,ref:n}):null});en.displayName=Ae;var tn="SelectBubbleInput",xt=a.forwardRef(({__scopeSelect:t,value:n,...o},l)=>{const c=a.useRef(null),d=B(l,c),s=Co(n);return a.useEffect(()=>{const i=c.current;if(!i)return;const r=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(r,"value").set;if(s!==n&&u){const v=new Event("change",{bubbles:!0});u.call(i,n),i.dispatchEvent(v)}},[s,n]),e.jsx(M.select,{...o,style:{...Pt,...o.style},ref:d,defaultValue:n})});xt.displayName=tn;function gt(t){return t===""||t===void 0}function vt(t){const n=_t(t),o=a.useRef(""),l=a.useRef(0),c=a.useCallback(s=>{const i=o.current+s;n(i),function r(p){o.current=p,window.clearTimeout(l.current),p!==""&&(l.current=window.setTimeout(()=>r(""),1e3))}(i)},[n]),d=a.useCallback(()=>{o.current="",window.clearTimeout(l.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(l.current),[]),[o,c,d]}function St(t,n,o){const c=n.length>1&&Array.from(n).every(p=>p===n[0])?n[0]:n,d=o?t.indexOf(o):-1;let s=on(t,Math.max(d,0));c.length===1&&(s=s.filter(p=>p!==o));const r=s.find(p=>p.textValue.toLowerCase().startsWith(c.toLowerCase()));return r!==o?r:void 0}function on(t,n){return t.map((o,l)=>t[(n+l)%t.length])}var nn=Ge,sn=Ze,rn=Qe,an=Je,ln=et,cn=tt,dn=rt,un=ct,pn=dt,mn=pt,hn=mt,fn=ht;function xn({...t}){return e.jsx(nn,{"data-slot":"select",...t})}function gn({...t}){return e.jsx(rn,{"data-slot":"select-value",...t})}function vn({className:t,size:n="default",children:o,...l}){return e.jsxs(sn,{"data-slot":"select-trigger","data-size":n,className:E("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[o,e.jsx(an,{asChild:!0,children:e.jsx(Ke,{className:"size-4 opacity-50"})})]})}function Sn({className:t,children:n,position:o="popper",...l}){return e.jsx(ln,{children:e.jsxs(cn,{"data-slot":"select-content",className:E("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...l,children:[e.jsx(jn,{}),e.jsx(dn,{className:E("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),e.jsx(yn,{})]})})}function wn({className:t,children:n,...o}){return e.jsxs(un,{"data-slot":"select-item",className:E("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...o,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(mn,{children:e.jsx(_o,{className:"size-4"})})}),e.jsx(pn,{children:n})]})}function jn({className:t,...n}){return e.jsx(hn,{"data-slot":"select-scroll-up-button",className:E("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(Ro,{className:"size-4"})})}function yn({className:t,...n}){return e.jsx(fn,{"data-slot":"select-scroll-down-button",className:E("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(Ke,{className:"size-4"})})}const xe=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"Foreman",value:"foreman"},{label:"Driver",value:"driver"},{label:"Helper",value:"helper"}],bn=go({first_name:pe().min(1,{message:"First name is required."}),last_name:pe().min(1,{message:"Last name is required."}),email_address:pe().email({message:"Invalid email address."}),phone:pe().refine(t=>bo(t,"US"),{message:"Invalid phone number"}),role:wo(xe.map(t=>t.value)),active:So().optional(),password:pe().optional()});function Cn({userId:t,closeSheet:n}){const[o,{isLoading:l}]=Bt(),[c,{isLoading:d}]=Vt(),{data:s,isLoading:i}=Ft({id:Number(t)},{skip:!t}),r=fo({mode:"onChange",reValidateMode:"onChange",resolver:xo(bn),defaultValues:{first_name:"",last_name:"",email_address:"",phone:"",role:"helper",active:!0,password:""},values:s});function p(u){t?c({id:Number(t),data:u}).unwrap().then(()=>{Ve.success("User updated."),n()}).catch(v=>{Fe(v)}):o({data:u}).unwrap().then(()=>{Ve.success("User created."),n()}).catch(v=>{Fe(v)})}return e.jsxs(e.Fragment,{children:[e.jsxs(Ht,{children:[e.jsxs(Ut,{children:[t?"Update":"Add"," user"]}),e.jsxs(zt,{className:"flex flex-row items-center gap-2",children:[e.jsxs("span",{children:["Employee ID:",(s==null?void 0:s.id)??""]}),e.jsxs("span",{children:["Creation Date:"," ",s!=null&&s.created_at?No(s==null?void 0:s.created_at,"dd MMM, yyyy"):""]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i&&t?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx($e,{})}):e.jsx(vo,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(p),className:"space-y-6",children:[e.jsx(J,{control:r.control,name:"first_name",render:({field:u})=>e.jsxs(ee,{children:[e.jsx(te,{children:"First name (required)"}),e.jsx(oe,{children:e.jsx(Pe,{...u,autoComplete:"off"})}),e.jsx(ae,{})]})}),e.jsx(J,{control:r.control,name:"last_name",render:({field:u})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Last name (required)"}),e.jsx(oe,{children:e.jsx(Pe,{...u,autoComplete:"off"})}),e.jsx(ae,{})]})}),e.jsx(J,{control:r.control,name:"email_address",render:({field:u})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Email (required)"}),e.jsx(Ie,{children:"Email address used to login to the system."}),e.jsx(oe,{children:e.jsx(Pe,{...u,autoComplete:"off"})}),e.jsx(ae,{})]})}),e.jsx(J,{control:r.control,name:"phone",render:({field:u})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Phone (required)"}),e.jsx(oe,{children:e.jsx(yo,{...u,value:qe(u.value??""),handleValueChange:u.onChange})}),e.jsx(ae,{})]})}),e.jsx(J,{control:r.control,name:"role",render:({field:u})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Position"}),e.jsxs(xn,{...u,children:[e.jsx(oe,{children:e.jsx(vn,{children:e.jsx(gn,{placeholder:"Select a position"})})}),e.jsx(Sn,{children:xe==null?void 0:xe.map(({label:v,value:C})=>e.jsx(wn,{value:C,children:v},C))})]}),e.jsx(ae,{})]})}),e.jsx(J,{control:r.control,name:"password",render:({field:u})=>e.jsxs(ee,{children:[e.jsx(te,{children:"Password"}),e.jsx(Ie,{children:"Required only when creating a new user."}),e.jsx(oe,{children:e.jsx(jo,{...u,autoComplete:"off"})}),e.jsx(ae,{})]})}),e.jsx(J,{control:r.control,name:"active",render:({field:u})=>e.jsxs(ee,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{className:"text-base",children:"Employee is active"}),e.jsx(Ie,{children:"If the employee is active, they will be able to login to the system."})]}),e.jsx(oe,{children:e.jsx(To,{checked:u.value??!1,onCheckedChange:u.onChange,name:u.name})})]})})]})})}),e.jsxs(Wt,{children:[e.jsx(Kt,{asChild:!0,children:e.jsx(ke,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})}),e.jsx($t,{type:"button",loading:l||d,disabled:l||d,onClick:r.handleSubmit(p),className:"w-full",children:t?"Update user":"Add user"})]})]})}const wt=a.createContext(void 0),Tn=({children:t})=>{const[n,o]=a.useState({props:null,open:!1}),l=d=>{o({props:d??null,open:!0})},c=()=>{o(d=>({...d,open:!1}))};return e.jsxs(wt.Provider,{value:{...n,openSheet:l,closeSheet:c},children:[t,e.jsx(Nn,{})]})},Oe=()=>{const t=a.useContext(wt);if(!t)throw new Error("useSheet must be used within a SheetProvider");return t},Nn=()=>{const{open:t,props:n,closeSheet:o}=Oe();return e.jsx(qt,{open:t,onOpenChange:l=>!l&&o(),children:e.jsx(Gt,{className:"w-full sm:min-w-xl",children:e.jsx(Cn,{...n,closeSheet:o})})})};function In({className:t,...n}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:E("w-full caption-bottom text-sm",t),...n})})}function Pn({className:t,...n}){return e.jsx("thead",{"data-slot":"table-header",className:E("[&_tr]:border-b",t),...n})}function _n({className:t,...n}){return e.jsx("tbody",{"data-slot":"table-body",className:E("[&_tr:last-child]:border-0",t),...n})}function jt({className:t,...n}){return e.jsx("tr",{"data-slot":"table-row",className:E("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...n})}function le({className:t,...n}){return e.jsx("th",{"data-slot":"table-head",className:E("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})}function ie({className:t,...n}){return e.jsx("td",{"data-slot":"table-cell",className:E("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})}function En(t,n){return`${t.charAt(0)}${n.charAt(0)}`.toUpperCase()}function Rn({users:t}){return e.jsxs(In,{className:"min-w-[750px]",children:[e.jsx(Pn,{children:e.jsxs(jt,{children:[e.jsx(le,{children:"Name"}),e.jsx(le,{children:"Role"}),e.jsx(le,{children:"Phone"}),e.jsx(le,{children:"Email"}),e.jsx(le,{children:"Status"}),e.jsx(le,{className:"text-right",children:"Actions"})]})}),e.jsx(_n,{children:t.map(n=>e.jsx(Mn,{user:n},n.id))})]})}function Mn({user:t}){const{openSheet:n}=Oe();return e.jsxs(jt,{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Yt,{children:e.jsx(Zt,{children:En(t.first_name,t.last_name)})}),`${t.first_name} ${t.last_name}`]}),e.jsx(ie,{className:"capitalize",children:t.role}),e.jsx(ie,{children:t.phone?qe(t.phone):"-"}),e.jsx(ie,{children:t.email_address}),e.jsx(ie,{children:e.jsxs(mo,{className:E("capitalize py-1 relative overflow-hidden bg-transparent",t.active?"text-[#00a455]":"text-foreground"),children:[e.jsx("span",{className:`${t.active?"bg-[#00a455]":"bg-foreground/50"} absolute inset-0 opacity-15`}),t.active?"Active":"Inactive",e.jsx("div",{className:E("size-2 rounded-full ml-1",t.active?"bg-[#00a455]":"bg-foreground/50")})]})}),e.jsx(ie,{className:"text-right",children:e.jsx(ke,{variant:"outline",size:"icon",onClick:()=>n({userId:t.id}),children:e.jsx(ho,{})})})]})}function An(){const{openSheet:t}=Oe(),{data:n,isLoading:o}=Jt(),[l,c]=a.useState("all"),d=n==null?void 0:n.filter(i=>l==="all"?i:i.role===l);function s(i){c(i)}return e.jsxs(eo,{children:[e.jsxs(to,{children:[e.jsx(oo,{children:"Employees"}),e.jsx(no,{children:"Manage your employees and their roles."}),e.jsx(so,{children:e.jsxs(ke,{onClick:()=>t(),children:[e.jsx(Io,{}),"Create user"]})})]}),e.jsxs(ro,{className:"space-y-2",children:[e.jsx(Ao,{filter:l,handleSetFilter:s}),o&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx($e,{})}),d&&e.jsx(Rn,{users:d??[]})]})]})}function Dn(){return Xt().id?e.jsx(Qt,{}):e.jsx(Tn,{children:e.jsx(ao,{children:e.jsx(An,{})})})}const Zn=Dn;export{Zn as Component};
