import{K as k,M as w,r as c,j as e,g as p,z as R,B as N,L as $,t as E,h as I}from"./index-BrQi1v-c.js";import{C as L,a as B,b as A,d as P,e as U}from"./card-Cim6kUnN.js";import{S as z}from"./switch-BF-SWcQn.js";import{I as C}from"./input-B52D2lzl.js";import{S as O,a as T}from"./scroll-area-Dlxjw5UU.js";import{S as n}from"./skeleton-CQuYJPyZ.js";import{S as F}from"./setting-page-wrapper-lwIfDS-L.js";import{h as G,f}from"./helpers-BTnTAqdu.js";import{N as j}from"./numeric-input-CE3LjWwX.js";import{P as M}from"./pen-line-OgDnHBxE.js";import"./index-CT2Pw8Do.js";const b="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function D(){const{data:l,isLoading:m}=k(),[y,{isLoading:g}]=w(),[o,d]=c.useState([]),[_,u]=c.useState(!1),[i,x]=c.useState(null);c.useEffect(()=>{l&&d(l)},[l]);function t(s){const r=o.map(a=>a.id===s.id?s:a);d(r),u(!0)}return e.jsx(F,{children:e.jsxs(L,{children:[e.jsx(B,{children:e.jsx(A,{children:"Rates"})}),e.jsx(P,{className:"space-y-6",children:e.jsxs(O,{className:"w-full",children:[e.jsxs("div",{className:p("mb-4 text-muted-foreground",b),children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:"2 movers"}),e.jsx("p",{children:"3 movers"}),e.jsx("p",{children:"4 movers"}),e.jsx("p",{children:"Extra mover"}),e.jsx("p",{children:"Extra truck"}),e.jsx("p",{children:"On/Off"}),e.jsx("p",{className:"sr-only",children:"Actions"})]}),e.jsx(R,{}),e.jsxs("div",{className:"min-w-[900px] divide-y",children:[m&&e.jsx(H,{}),o==null?void 0:o.map((s,r)=>e.jsxs("div",{className:p("py-4",b),children:[i===r?e.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[e.jsx(C,{name:`${s.name}-name`,value:s.name,onChange:a=>{t({...s,name:a.target.value})}}),e.jsx(C,{name:`${s.name}-color`,type:"color",value:s.color,onChange:a=>{t({...s,color:a.target.value})},className:"px-[2px] py-0"})]}):e.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:s.color,backgroundColor:`rgba(${G(s.color)}, 0.1)`},children:[s.name,e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:s.color}})]}),Object.keys(s.movers_rates).slice(0,3).map((a,h)=>{const v=s.movers_rates[a].hourly_rate;return i===r?e.jsx(j,{name:`${s.name}-${a}-${h}`,value:(v/100).toString(),min:0,max:1e4,onChange:S=>{t({...s,movers_rates:{...s.movers_rates,[a]:{...s.movers_rates[a],hourly_rate:Number(S)*100}}})}},h):e.jsx("div",{children:f(v)},h)}),e.jsx("div",{children:i===r?e.jsx(j,{name:`${s.name}-extra-mover`,value:(s.extra_mover_rate/100).toString(),min:0,max:1e4,onChange:a=>{t({...s,extra_mover_rate:Number(a)*100})}}):f(s.extra_mover_rate)}),e.jsx("div",{children:i===r?e.jsx(j,{name:`${s.name}-extra-truck`,value:(s.extra_truck_rate/100).toString(),min:0,max:1e4,onChange:a=>{t({...s,extra_truck_rate:Number(a)*100})}}):f(s.extra_truck_rate)}),e.jsx(z,{id:`${s.name}-enable`,checked:s.enable,disabled:r===0,onCheckedChange:a=>{t({...s,enable:a})}}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>{x(a=>a===r?null:r)},children:e.jsx(M,{})})]},r))]}),e.jsx(T,{orientation:"horizontal"})]})}),e.jsx(U,{className:"justify-end border-t",children:e.jsxs("div",{className:p("flex gap-3 transition-opacity duration-500",{"invisible opacity-0":!_,"visible opacity-100":_}),children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>{d(l),u(!1),x(null)},children:"Cancel"}),e.jsx($,{type:"button",disabled:g,loading:g,onClick:()=>{y({rates:o}).unwrap().then(()=>{u(!1),x(null),E.success("Changes saved")}).catch(s=>{I(s)})},children:"Save changes"})]})})]})})}const ae=D;function H(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((l,m)=>e.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"}),e.jsx(n,{className:"h-9 w-full"})]},m))})}export{ae as Component};
