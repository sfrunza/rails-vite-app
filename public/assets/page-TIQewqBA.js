import{CalendarWithRates as e,Card as t,CardContent as n,CardHeader as r,CardTitle as i,Dialog as a,DialogContent as o,DialogDescription as s,DialogHeader as c,DialogTitle as l,Label as u,RadioGroup as d,RadioGroupItem as f,__toESM as p,format as m,handleApiError as h,hexToRgb as g,require_jsx_runtime as _,require_react as v,useGetRatesQuery as y,useUpdateCalendarRateMutation as b}from"./index-OmLcTgDE.js";import{SettingPageWrapper as x}from"./setting-page-wrapper-DsxRRjvs.js";var S=p(_());function C({isOpen:e,setIsOpen:t,calendarDayInfo:n}){let{data:r}=y(),[i]=b(),p=r?.filter(e=>e.enable);if(!e&&!n)return null;let{id:_,rate_id:v,is_blocked:x}=n,C=v??0,w=m(new Date(n.formatted_date+`T00:00:00`),`PPP`);function T(e,t){let n={};t===0?(n.is_blocked=!0,n.rate_id=null):(n.rate_id=t,n.is_blocked=!1),i({id:e,newData:n}).unwrap().catch(e=>{h(e)})}return(0,S.jsx)(a,{open:e,onOpenChange:t,children:(0,S.jsxs)(o,{className:`sm:max-w-xs`,children:[(0,S.jsxs)(c,{children:[(0,S.jsx)(l,{children:w}),(0,S.jsx)(s,{className:`hidden`})]}),(0,S.jsxs)(d,{defaultValue:x?`0`:C.toString(),onValueChange:e=>{T(_,parseInt(e))},className:`gap-4`,children:[p?.map((e,t)=>(0,S.jsxs)(u,{htmlFor:e.id.toString(),className:`flex w-full cursor-pointer items-center gap-6 rounded-md p-3 transition-all hover:ring`,style:{color:e.color,backgroundColor:`rgba(${g(e.color)}, 0.1)`},children:[(0,S.jsx)(f,{value:e.id.toString(),id:e.id.toString()}),(0,S.jsxs)(`span`,{className:`flex flex-grow items-center gap-2`,children:[e.name,(0,S.jsx)(`span`,{className:`size-2 rounded-full`,style:{backgroundColor:e.color}})]})]},t)),(0,S.jsx)(`div`,{className:`flex items-center space-x-2`,children:(0,S.jsxs)(u,{htmlFor:`0`,className:`flex w-full cursor-pointer items-center gap-6 rounded-md bg-foreground/20 p-3 text-foreground transition-all hover:ring`,children:[(0,S.jsx)(f,{value:`0`,id:`0`}),(0,S.jsxs)(`span`,{className:`flex flex-grow items-center gap-2`,children:[`Blocked`,(0,S.jsx)(`span`,{className:`size-2 rounded-full bg-black`})]})]})})]})]})})}var w=p(v());function T(){let e=[],t=new Date;for(let n=0;n<11;n++){let r=new Date(t.getFullYear(),t.getMonth()+n,1);e.push(r)}return e}function E(){let t=T(),[n,r]=(0,w.useState)(!1),[i,a]=(0,w.useState)();function o(e,t){r(!0),a(t)}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(`div`,{className:`grid xl:grid-cols-2 gap-6 justify-items-center`,children:t.map((t,n)=>(0,S.jsx)(e,{calendarProps:{month:t,mode:`single`,disableNavigation:!0,hideNavigation:!0,showOutsideDays:!1,className:`rounded-xl border`},onSelectDate:o},n))}),i&&(0,S.jsx)(C,{isOpen:n,setIsOpen:r,calendarDayInfo:i})]})}function D(){return(0,S.jsx)(x,{children:(0,S.jsxs)(t,{className:`max-w-2xl`,children:[(0,S.jsx)(r,{children:(0,S.jsx)(i,{children:`Calendar Rates`})}),(0,S.jsx)(n,{children:(0,S.jsx)(E,{})})]})})}const O=D;export{O as Component};