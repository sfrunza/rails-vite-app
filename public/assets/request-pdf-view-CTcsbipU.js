import{AddressItem as e,Button as t,Printer as n,Spinner as r,__toESM as i,convertMinutesToHoursAndMinutes as a,formatCentsToDollarsString as o,formatDate as s,formatPhone as c,formatTimeWindow as l,require_jsx_runtime as u,require_react as d,timeObjectToString as f,useGetMoveSizesQuery as p,useGetPackingsQuery as m,useGetRequestByIdQuery as h,useGetServicesQuery as g,useGetSettingsQuery as _,useParams as v}from"./index-OmLcTgDE.js";var y=i(d()),b=i(u());function x(){var i,u,d;let{id:x}=v(),{data:S,isLoading:C,error:w}=h({id:Number(x)},{skip:!x}),{data:T,isLoading:E,error:D}=g(),{data:O,isLoading:k,error:A}=m(),{data:j,isLoading:M,error:N}=p(),{data:P,isLoading:F,error:I}=_(),L=(0,y.useRef)(null),R=T?.find(e=>e.id===S?.service_id),z=j?.find(e=>e.id===S?.move_size_id),B=O?.find(e=>e.id===S?.packing_id);if(C||E||M||F||k)return(0,b.jsx)(`div`,{className:`flex h-screen items-center justify-center`,children:(0,b.jsx)(r,{})});if(w||D||N||I||A)return(0,b.jsx)(`div`,{className:`flex h-screen items-center justify-center`,children:(0,b.jsx)(`p`,{className:`text-lg`,children:`Something went wrong. Please try again.`})});if(!S)return(0,b.jsx)(`div`,{className:`flex h-screen items-center justify-center`,children:(0,b.jsx)(`p`,{className:`text-lg`,children:`Request not found`})});let V=P?.company_logo;function H(){window.print()}return(0,b.jsxs)(`div`,{className:`p-4 print:p-0 bg-muted`,children:[(0,b.jsx)(`div`,{className:`mb-4 flex justify-end print:hidden w-full`,children:(0,b.jsxs)(t,{onClick:H,children:[(0,b.jsx)(n,{}),` Print`]})}),(0,b.jsxs)(`div`,{ref:L,className:`mx-auto bg-background p-8 rounded-md shadow-sm print:shadow-none text-xs`,style:{width:`210mm`,minHeight:`297mm`},children:[(0,b.jsxs)(`div`,{className:`mb-8 flex justify-between`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`h1`,{className:`text-2xl font-bold uppercase`,children:S.status.replace(`_`,` `)}),(0,b.jsxs)(`div`,{className:`flex h-5 items-center space-x-2 font-medium divide-x divide-border uppercase text-muted-foreground`,children:[(0,b.jsxs)(`p`,{className:`pr-2`,children:[`Moving plan #`,S.id]}),(0,b.jsx)(`p`,{children:R?.name})]})]}),(0,b.jsx)(`div`,{className:`flex justify-center`,children:(0,b.jsx)(`img`,{src:V,alt:`Company Logo`,className:`w-16`})})]}),(0,b.jsxs)(`div`,{className:`space-y-4`,children:[(0,b.jsx)(`section`,{className:`border-b pb-4`,children:(0,b.jsxs)(`div`,{className:`grid grid-cols-2 gap-20`,children:[(0,b.jsxs)(`div`,{className:`[&>*]:flex [&>*]:justify-between [&>*]:items-center`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Move date`}),(0,b.jsx)(`b`,{children:S.moving_date?s(S.moving_date):`N/A`})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Start time`}),(0,b.jsx)(`b`,{children:l(S?.start_time_window||0)})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Move size`}),(0,b.jsx)(`b`,{children:z?.name})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Hourly rate`}),(0,b.jsxs)(`b`,{children:[o(S?.rate||0),`/hr`]})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Crew size`}),(0,b.jsxs)(`b`,{children:[S?.crew_size,` movers`]})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Trucks`}),(0,b.jsxs)(`b`,{children:[S?.truck_ids.length,` `,S?.truck_ids.length>1?`trucks`:`truck`]})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Travel time`}),(0,b.jsx)(`b`,{children:a(S?.travel_time||0)})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Est. Labor Time`}),(0,b.jsx)(`b`,{children:f(S.work_time)})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`p`,{children:`Est. Total Time`}),(0,b.jsx)(`b`,{children:f(S.total_time)})]})]}),(0,b.jsxs)(`div`,{className:`flex justify-between`,children:[(0,b.jsx)(`p`,{children:`Client`}),(0,b.jsxs)(`div`,{className:`flex flex-col items-end`,children:[(0,b.jsx)(`b`,{children:S.customer?`${S.customer.first_name} ${S.customer.last_name}`:`N/A`}),(0,b.jsx)(`p`,{children:c((i=S.customer)?.phone)}),(0,b.jsx)(`p`,{children:(u=S.customer)?.email_address})]})]})]})}),(0,b.jsx)(`section`,{className:`border-b pb-4`,children:(0,b.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,b.jsx)(e,{type:`Origin`,address:S.origin}),(0,b.jsx)(e,{type:`Destination`,address:S.destination}),(d=S.stops)?.map((t,n)=>(0,b.jsx)(e,{type:t.type===`pick_up`?`Extra pickup`:`Extra dropoff`,address:t},n))]})}),(0,b.jsxs)(`section`,{className:`space-y-5 border-b pb-4`,children:[(0,b.jsxs)(`p`,{children:[(0,b.jsx)(`b`,{children:`Please Note:`}),` This quote is just an estimate and provided for your convenience. Actual move details will be provided during the move.`]}),(0,b.jsx)(`p`,{children:`Move cost is based on the size of your shipment and amount of packing to be performed. By entering the items through the online inventory our system will generate a quote based on a database average for generally similar moves.`}),(0,b.jsx)(`p`,{children:`It is best to consider this a thinking tool. Your final cost will be based on hourly rate and actual time your move will take. Additional time may be required if your move involves long walks from your apartment to the truck, narrow hallways and/or tight staircases, disassembling and reassembling of furniture, hoisting, reassembling of furniture, hoisting, moving of oversized, antiques items, ones with glass and/or marble, appliances move and items over 300lb.`}),(0,b.jsx)(`p`,{children:`It is important to understand, that the move time will also depend on how well you are packed and organized: all drawers of all the furniture must be emptied, and all miscellaneous items packed neatly into moving boxes of correct sizes.`})]}),(0,b.jsxs)(`section`,{className:`flex justify-between gap-10 border-b pb-4`,children:[(0,b.jsx)(`b`,{className:`font-black uppercase`,children:`Additional Details`}),(0,b.jsx)(`p`,{className:`whitespace-break-spaces`,children:S.details.comments||`N/A`})]}),(0,b.jsxs)(`section`,{className:`flex justify-between gap-10 border-b pb-4`,children:[(0,b.jsx)(`b`,{className:`font-black uppercase`,children:`Move Size`}),(0,b.jsx)(`p`,{className:`whitespace-break-spaces`,children:z?.name||`N/A`})]}),(0,b.jsxs)(`section`,{className:`flex justify-between gap-10 border-b pb-4`,children:[(0,b.jsx)(`b`,{className:`font-black uppercase`,children:`Packing`}),(0,b.jsx)(`p`,{className:`whitespace-break-spaces`,children:B?.name||`N/A`})]}),(0,b.jsxs)(`section`,{className:`flex justify-between gap-10 border-b pb-4`,children:[(0,b.jsx)(`b`,{className:`font-black uppercase`,children:`Paid Deposit`}),(0,b.jsx)(`p`,{className:`whitespace-break-spaces`,children:o(S.deposit||0)})]}),S.extra_services&&S.extra_services.length>0&&(0,b.jsxs)(`section`,{children:[(0,b.jsx)(`h2`,{className:`font-black uppercase mb-3`,children:`Extra Services`}),(0,b.jsxs)(`table`,{className:`w-full border-collapse`,children:[(0,b.jsx)(`thead`,{children:(0,b.jsxs)(`tr`,{className:`bg-muted`,children:[(0,b.jsx)(`th`,{className:`text-left p-2 border`,children:`Name`}),(0,b.jsx)(`th`,{className:`text-left p-2 border`,children:`Quantity`}),(0,b.jsx)(`th`,{className:`text-left p-2 border`,children:`Price`}),(0,b.jsx)(`th`,{className:`text-left p-2 border`,children:`Subtotal`})]})}),(0,b.jsxs)(`tbody`,{children:[S.extra_services.map((e,t)=>(0,b.jsxs)(`tr`,{className:`border-b`,children:[(0,b.jsx)(`td`,{className:`p-2 border`,children:e.name}),(0,b.jsx)(`td`,{className:`p-2 border`,children:e.quantity}),(0,b.jsx)(`td`,{className:`p-2 border`,children:o(e.price||0)}),(0,b.jsx)(`td`,{className:`p-2 border`,children:o(e.total||0)})]},t)),(0,b.jsxs)(`tr`,{className:`font-bold`,children:[(0,b.jsx)(`td`,{colSpan:3,className:`p-2 text-right`,children:`Total:`}),(0,b.jsx)(`td`,{className:`p-2`,children:o(S.extra_services_total||0)})]})]})]})]})]})]})]})}const S=x;export{S as Component};