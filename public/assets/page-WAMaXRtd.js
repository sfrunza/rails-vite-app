import{a3 as S,a4 as w,r as i,j as s,g as h,A as R,B as C,L as E,t as I,h as P}from"./index-Dm7BQT7l.js";import{C as A,a as B,b as L,d as U,e as O}from"./card-V1I8AuRO.js";import{S as T}from"./switch-COHIPXe2.js";import{I as N}from"./input-DQgfCGN5.js";import{S as V,P as p,a as z}from"./scroll-area-DfGa8tuq.js";import{S as l}from"./skeleton-Cmd4G45R.js";import{S as F}from"./setting-page-wrapper-DigH3shI.js";import{h as G,f}from"./helpers-BTnTAqdu.js";import{P as D}from"./pencil-mKu3sq-8.js";import"./index-C7Ze5WLN.js";const y="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function H(){const{data:t,isLoading:d}=S(),[b,{isLoading:j}]=w(),[o,m]=i.useState([]),[g,u]=i.useState(!1),[c,x]=i.useState(null);i.useEffect(()=>{t&&m(t)},[t]);function n(e){const r=o.map(a=>a.id===e.id?e:a);m(r),u(!0)}return s.jsx(F,{children:s.jsxs(A,{children:[s.jsx(B,{children:s.jsx(L,{children:"Rates"})}),s.jsx(U,{className:"space-y-6",children:s.jsxs(V,{className:"w-full",children:[s.jsxs("div",{className:h("mb-4 text-muted-foreground",y),children:[s.jsx("p",{children:"Name"}),s.jsx("p",{children:"2 movers"}),s.jsx("p",{children:"3 movers"}),s.jsx("p",{children:"4 movers"}),s.jsx("p",{children:"Extra mover"}),s.jsx("p",{children:"Extra truck"}),s.jsx("p",{children:"On/Off"}),s.jsx("p",{className:"sr-only",children:"Actions"})]}),s.jsx(R,{}),s.jsxs("div",{className:"min-w-[900px] divide-y",children:[d&&s.jsx(M,{}),o==null?void 0:o.map((e,r)=>s.jsxs("div",{className:h("py-4",y),children:[c===r?s.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[s.jsx(N,{value:e.name,onChange:a=>{n({...e,name:a.target.value})}}),s.jsx(N,{type:"color",value:e.color,onChange:a=>{n({...e,color:a.target.value})},className:"px-[2px] py-0"})]}):s.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:e.color,backgroundColor:`rgba(${G(e.color)}, 0.1)`},children:[e.name,s.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}})]}),Object.keys(e.movers_rates).slice(0,3).map((a,_)=>{const v=e.movers_rates[a].hourly_rate;return c===r?s.jsx(p,{value:v,onValueChange:k=>{n({...e,movers_rates:{...e.movers_rates,[a]:{...e.movers_rates[a],hourly_rate:k}}})}},_):s.jsx("div",{children:f(v)},_)}),s.jsx("div",{children:c===r?s.jsx(p,{value:e.extra_mover_rate,onValueChange:a=>n({...e,extra_mover_rate:a})}):f(e.extra_mover_rate)}),s.jsx("div",{children:c===r?s.jsx(p,{value:e.extra_truck_rate,onValueChange:a=>n({...e,extra_truck_rate:a})}):f(e.extra_truck_rate)}),s.jsx(T,{id:e.name,checked:e.enable,disabled:r===0,onCheckedChange:a=>{n({...e,enable:a})}}),s.jsx(C,{variant:"outline",size:"icon",onClick:()=>{x(a=>a===r?null:r)},children:s.jsx(D,{})})]},r))]}),s.jsx(z,{orientation:"horizontal"})]})}),s.jsx(O,{className:"justify-end border-t",children:s.jsxs("div",{className:h("flex gap-3 transition-opacity duration-500",{"invisible opacity-0":!g,"visible opacity-100":g}),children:[s.jsx(C,{type:"button",variant:"outline",onClick:()=>{m(t),u(!1),x(null)},children:"Cancel"}),s.jsx(E,{type:"button",disabled:j,loading:j,onClick:()=>{b({rates:o}).unwrap().then(()=>{u(!1),x(null),I.success("Changes saved")}).catch(e=>{P(e)})},children:"Save changes"})]})})]})})}const es=H;function M(){return s.jsx(s.Fragment,{children:Array.from({length:5}).map((t,d)=>s.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"}),s.jsx(l,{className:"h-9 w-full"})]},d))})}export{es as Component};
