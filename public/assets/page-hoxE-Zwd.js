import{CalendarDays as e,Mail as t,MapPin as n}from"./map-pin-CcsOFVMM.js";import{PencilLine as r}from"./pencil-line-BUB2-8JZ.js";import{Button as i,Label as a,Separator as o,Skeleton as s,Spinner as c,Truck as l,__toESM as u,cn as d,createLucideIcon as f,formatDate as p,require_jsx_runtime as m,timeWindowToString as h,useAuth as g,useGetCustomerRequestsQuery as _,useGetServicesQuery as v,useGetUserByIdQuery as y}from"./index-BpPvn16n.js";import{Badge as b}from"./badge-6y2efZus.js";import{Card as x,CardAction as S,CardContent as C,CardDescription as w,CardHeader as T,CardTitle as E}from"./card-D6e0mOnd.js";import{Tabs as D,TabsContent as O,TabsList as k,TabsTrigger as A}from"./tabs-ONBK2pzv.js";import{statusBgColors as j,statusTextColors as M}from"./cable-BpiuPVb-.js";import{useRequestsSubscription as N}from"./use-requests-subscription-DgHA1tDe.js";const P=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`polyline`,{points:`12 6 12 12 16 14`,key:`68esgv`}]],F=f(`clock`,P),I=[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]],L=f(`package`,I),R=[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]],z=f(`phone`,R),B=[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]],V=f(`user`,B);var H=u(m());function U(){let e=g(),{data:n,isLoading:a}=y({id:e?.id},{skip:!e?.id});return(0,H.jsxs)(x,{children:[(0,H.jsxs)(T,{children:[(0,H.jsx)(E,{children:`Contact Information`}),(0,H.jsx)(w,{children:`Keep your contact details up to date`}),(0,H.jsx)(S,{children:(0,H.jsx)(i,{variant:`outline`,size:`icon`,className:`text-green-600 hover:text-green-600`,children:(0,H.jsx)(r,{})})})]}),(0,H.jsxs)(C,{className:`space-y-3`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,H.jsx)(V,{className:`size-4 text-muted-foreground`}),a?(0,H.jsx)(s,{className:`h-6 w-2/3`}):`${n?.first_name} ${n?.last_name}`]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-4 text-muted-foreground`,children:[(0,H.jsx)(t,{className:`size-4`}),a?(0,H.jsx)(s,{className:`h-6 w-2/3`}):n?.email_address]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-4 text-muted-foreground`,children:[(0,H.jsx)(z,{className:`size-4`}),a?(0,H.jsx)(s,{className:`h-6 w-2/3`}):`(617) 998-0987`]})]})]})}function W(){let{data:t,isLoading:r}=_(void 0,{refetchOnMountOrArgChange:!0,refetchOnReconnect:!0});N();let{data:i}=v(),s=t?.requests.filter(e=>e.status!==`completed`),u=t?.requests.filter(e=>e.status===`completed`);function f(e){var t;return i==null||(t=i.find(t=>t.id===e))==null?void 0:t.name}return(0,H.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[calc(100vh-10rem)]`,children:[(0,H.jsxs)(`div`,{className:`mb-8`,children:[(0,H.jsx)(`h2`,{className:`text-2xl font-bold`,children:`My Account`}),(0,H.jsx)(`p`,{className:`text-muted-foreground`,children:`Manage your contact information and track your moves`})]}),(0,H.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-8`,children:[(0,H.jsx)(`div`,{className:`lg:col-span-1`,children:(0,H.jsx)(U,{})}),(0,H.jsx)(`div`,{className:`lg:col-span-2`,children:(0,H.jsxs)(D,{defaultValue:`current`,className:`w-full`,children:[(0,H.jsxs)(k,{className:`grid w-full grid-cols-2`,children:[(0,H.jsx)(A,{value:`current`,children:`Current Moves`}),(0,H.jsx)(A,{value:`past`,children:`Past Moves`})]}),(0,H.jsxs)(O,{value:`current`,className:`space-y-6 mt-4`,children:[(0,H.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,H.jsx)(`h3`,{className:`text-lg font-semibold pl-1`,children:`Upcoming & Active Moves`}),(0,H.jsxs)(b,{variant:`secondary`,children:[s?s?.length:0,` active`]})]}),r&&(0,H.jsx)(`div`,{className:`flex justify-center items-center h-full`,children:(0,H.jsx)(c,{})}),s?.map(t=>(0,H.jsxs)(x,{children:[(0,H.jsxs)(T,{children:[(0,H.jsxs)(E,{className:`text-lg`,children:[`Move #`,t.id]}),(0,H.jsx)(S,{children:(0,H.jsxs)(b,{className:d(`capitalize py-1 relative overflow-hidden bg-transparent`,M[t.status]),children:[(0,H.jsx)(`span`,{className:`${j[t.status]} absolute inset-0 opacity-15`}),t.status.replace(`_`,` `),(0,H.jsx)(`div`,{className:d(`size-2 rounded-full ml-1`,j[t.status])})]})})]}),(0,H.jsxs)(C,{className:`space-y-4`,children:[(0,H.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,H.jsxs)(`div`,{className:`space-y-2`,children:[(0,H.jsxs)(a,{className:`text-sm font-medium text-muted-foreground`,children:[(0,H.jsx)(n,{className:`size-4 text-muted-foreground`}),`From`]}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${t.origin.street}, ${t.origin.city}, ${t.origin.state} ${t.origin.zip}`})]}),(0,H.jsxs)(`div`,{className:`space-y-2`,children:[(0,H.jsxs)(a,{className:`text-sm font-medium text-muted-foreground`,children:[(0,H.jsx)(n,{className:`size-4 text-muted-foreground`}),`To`]}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${t.destination.street}, ${t.destination.city}, ${t.destination.state} ${t.destination.zip}`})]})]}),(0,H.jsx)(o,{}),(0,H.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-4 text-sm`,children:[(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(e,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:p(t.moving_date)})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(L,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:f(t.service_id)})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(l,{className:`size-4 text-muted-foreground`}),(0,H.jsxs)(`span`,{children:[t.crew_size,` movers`]})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(F,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:h(t.start_time_window,t.end_time_window)})]})]})]})]},t.id))]}),(0,H.jsxs)(O,{value:`past`,className:`space-y-6 mt-4`,children:[(0,H.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,H.jsx)(`h3`,{className:`text-lg font-semibold pl-1`,children:`Completed Moves`}),(0,H.jsxs)(b,{variant:`secondary`,children:[u?u?.length:0,` completed`]})]}),u?.map(t=>(0,H.jsxs)(x,{children:[(0,H.jsxs)(T,{children:[(0,H.jsxs)(E,{className:`text-lg`,children:[`Move #`,t.id]}),(0,H.jsxs)(S,{children:[(0,H.jsxs)(b,{className:d(`capitalize py-1 relative overflow-hidden bg-transparent`,M[t.status]),children:[(0,H.jsx)(`span`,{className:`${j[t.status]} absolute inset-0 opacity-15`}),t.status.replace(`_`,` `),(0,H.jsx)(`div`,{className:d(`size-2 rounded-full ml-1`,j[t.status])})]}),(0,H.jsx)(`div`,{className:`flex items-center`,children:[...[,,,,,]].map((e,t)=>(0,H.jsx)(`span`,{className:`text-sm ${t<2?`text-yellow-400`:`text-gray-300`}`,children:`â˜…`},t))})]})]}),(0,H.jsxs)(C,{className:`space-y-4`,children:[(0,H.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,H.jsxs)(`div`,{children:[(0,H.jsx)(a,{className:`text-sm font-medium text-muted-foreground`,children:`From`}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${t.origin.city}, ${t.origin.state} ${t.origin.zip}`})]}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(a,{className:`text-sm font-medium text-muted-foreground`,children:`To`}),(0,H.jsx)(`p`,{className:`text-sm`,children:`${t.destination.city}, ${t.destination.state} ${t.destination.zip}`})]})]}),(0,H.jsx)(o,{}),(0,H.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-4 text-sm`,children:[(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(e,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:p(t.moving_date)})]}),(0,H.jsx)(`div`,{className:`flex items-center space-x-2`,children:(0,H.jsx)(L,{className:`size-4 text-muted-foreground`})}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(l,{className:`size-4 text-muted-foreground`}),(0,H.jsxs)(`span`,{children:[t.crew_size,` movers`]})]}),(0,H.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,H.jsx)(F,{className:`size-4 text-muted-foreground`}),(0,H.jsx)(`span`,{children:h(t.start_time_window,t.end_time_window)})]})]})]})]},t.id))]})]})})]})]})}const G=W;export{G as Component};